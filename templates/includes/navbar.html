{% load static %}

<nav class="navbar navbar-expand-lg bg-body border-bottom p-3">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand ms-3" href="#">
      <img src="{% static 'images/logo.svg' %}" width="36" height="36" />
    </a>

    <!-- Toggle (only visible below lg automatically) -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#appDrawer"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Desktop Menu -->
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item px-2">
          <a href="{% url 'home' %}" class="nav-link fw-semibold">Home</a>
        </li>

        <li class="nav-item dropdown px-2">
          <a
            href="#"
            class="nav-link dropdown-toggle fw-semibold"
            data-bs-toggle="dropdown"
          >
            Automações
          </a>
          <ul class="dropdown-menu">
            <li><a href="#" class="dropdown-item">Conversor GPON</a></li>
          </ul>
        </li>

        <li class="nav-item px-2">
          <a href="{% url 'about' %}" class="nav-link fw-semibold">Sobre</a>
        </li>
      </ul>

      {% if user.is_authenticated %}
      <form method="post" action="{% url 'logout' %}" class="me-4">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger px-4">Sair</button>
      </form>
      {% else %}
      <a href="{% url 'login' %}" class="btn btn-dark me-4 px-4">Entrar</a>
      {% endif %}
    </div>
  </div>
</nav>

<!-- Mobile Menu -->
<div
  class="offcanvas offcanvas-start"
  tabindex="-1"
  id="appDrawer"
  style="--bs-offcanvas-width: 260px"
>
  <!-- Header -->
  <div class="p-4 border-bottom">
    <img src="{% static 'images/logo.svg' %}" width="48" />
    <h5 class="mt-3 mb-0">Honeycomb</h5>
    <small class="text-muted">Web Automation</small>
  </div>

  <!-- Body -->
  <div class="offcanvas-body p-0">
    <a class="drawer-item">Home</a>

    <a class="drawer-item" data-bs-toggle="collapse" href="#autoMenu">
      Automações
    </a>

    <div class="collapse ps-3" id="autoMenu">
      <a href="#" class="drawer-sub">Conversor GPON</a>
    </div>

    <a class="drawer-item">Sobre</a>

    <div class="p-3 mt-3">
      {% if user.is_authenticated %}
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger w-100">Sair</button>
      </form>
      {% else %}
      <a class="btn btn-dark w-100">Entrar</a>
      {% endif %}
    </div>
  </div>
</div>
